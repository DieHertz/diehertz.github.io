<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>
      BiQuadDesigner
    </title>
    <meta name="viewport" content="width=device-width"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rev="made" href="http://www.arachnoid.com"/>
    <meta http-equiv="Content-language" content="en"/>
    <meta name="author" content="Paul Lutus"/>
    <meta name="owner" content="Paul Lutus"/>
    <meta name="description" content="A rewritten Java/JavaScript biquadratic filter designer."/>
    <meta name="group" content="ARACH/JAVA"/>
    <meta name="groupTitle" content="Java"/>
    <meta name="menuCat" content="CareWare/Java"/>
    <meta name="menuCat" content="JavaScript"/>
    <meta name="menuCat" content="Calculators"/>
    <meta name="menuCat" content="Recent"/>
    <meta name="keywords" content="java biquadratic filter electronics simulation modeling design"/>
    <meta name="rating" content="General"/>
    <meta name="ROBOTS" content="ALL"/>
    <meta name="GENERATOR" content="Arachnophilia 2.1"/>
    <meta name="FORMATTER" content="Arachnophilia 2.1"/>
    <!-- Try to avoid browser caching of content -->
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <link rel="stylesheet" type="text/css" href="resources/default_article.css"/>
    <link rel="stylesheet" type="text/css" href="resources/styles.css"/>
    <script type="text/javascript" src="javascript/BiQuadFilter.js"></script>
    <script type="text/javascript" src="javascript/BiQuad.js"></script>
  </head>
  <body>
    <div align="center">
      <div class="article_title_inverse">BiQuadDesigner</div>
      <div class="article_linklist_inverse">
        <p style="">A rewritten Java/JavaScript biquadratic filter designer</p>
        <p style="">Copyright &copy 2017, <a href="https://arachnoid.com/administration/index.html" title="Click for biography">P. Lutus</a></p>
        
      </div>
    </div>
    
    <div class="article_wrapper">
      <div class="roundcorner_16_parch_content"><br/>
        
        <p><div align="center">
            <div id="graphContainer" class="graph_container">
              <div id="amplitudeLeftColumn" class="left_column"></div>
              <canvas id="amplitudeCanvas" class="graph_canvas" width="700" height="300" ></canvas>
              <div id="amplitudeBottomRow" class="bottom_row"></div>
            </div>

            <div id="phaseContainer" class="graph_container">
              <div id="phaseLeftColumn" class="left_column"></div>
              <canvas id="phaseCanvas" class="phase_canvas" width="700" height="300" ></canvas>
              <div id="phaseBottomRow" class="bottom_row"></div>
            </div>
            
            <div id="controls" class="table">
              
              <div class="filter_type small_cell table_cell">
                <p><b>Filter Type:</b></p>

                <input type="Radio" id="lowpass_filter" name="filtertype" class="ftRadio cookie" value="" checked/>Lowpass<br/>
                <input type="Radio" name="filtertype" class="ftRadio cookie" value=""/>Highpass<br/>
                <input type="Radio" name="filtertype" class="ftRadio cookie" value=""/>Bandpass<br/>
                <input type="Radio" id="peak_filter" name="filtertype" class="ftRadio cookie" value=""/>Peak<br/>
                <input type="Radio" name="filtertype" class="ftRadio cookie" value=""/>Notch<br/>
                <input type="Radio" name="filtertype" class="ftRadio cookie" value=""/>Lowshelf<br/>
                <input type="Radio" name="filtertype" class="ftRadio cookie" value=""/>Highshelf
              </div>
              <div class="control_labels small_cell table_cell">
                <p><b>Parameters:</b></p>

                <div style="text-align:right;">
                  Center Frequency Hz:<br/>
                  Sample Rate Hz:<br/>
                  Q:<br/>
                  Gain dB:<br/>
                  Vertical Scale:<br/>
                  Horizontal Scale:
                </div>
              </div>
              <div class="controls small_cell table_cell">
                <p>&nbsp;</p>

                <input type="number" step="any" class="filterValue cookie" id="input_cf" value=""/>
                <input type="button" step="any" value="Default" title="Reset this value to its default" onclick="BiQuad.setDefaultRedraw('input_cf');"/><br/>
                <input type="number" step="any" class="filterValue cookie" id="input_rate" value=""/>
                <input type="button" value="Default" title="Reset this value to its default" onclick="BiQuad.setDefaultRedraw('input_rate');"/><br/>
                <input type="number" step="any" class="filterValue cookie" id="input_q" value=""/>
                <input type="button" value="Default" title="Reset this value to its default" onclick="BiQuad.setDefaultRedraw('input_q');"/><br/>
                <input type="number" step="any" class="filterValue cookie" id="input_gain" value=""/>
                <input type="button" value="Default" title="Reset this value to its default" onclick="BiQuad.setDefaultRedraw('input_gain');"/><br/>
                <input type="Radio" id="vert_log" name="vertType" class="vsRadio cookie" value="" checked/>20 Log<sub>10</sub> (dB) |
                <input type="Radio" id="vert_linear" name="vertType" class="vsRadio cookie" value=""/>Linear<br/>
                <input type="Radio" id="horiz_log" name="horizType" class="vsRadio cookie" value=""/>Log<sub>10</sub> |
                <input type="Radio" id="horiz_linear" name="horizType" class="vsRadio cookie" value="" checked/>Linear
                
                
                <div align="center"><input type="button" id="reset_button" value="All Defaults" title="Reset all values to defaults" onclick="BiQuad.defaults(false);"/></div>
                
              </div>
              <div id="constants" class="table_cell small_cell" title="Read the attached article for an explanation of these values.">
              </div>
              
              
            </div><!-- table class -->
          </div> <!-- center -->
        </p>
        
        <a name="Program_Instructions"></a><span class="article_subtopic">Program Instructions</span>
        <blockquote>
          <p>The above is a JavaScript version of my BiQuadDesigner program &mdash; it's interactive and easy to use:</p>
          
          <ul>
            <li>Choose a <b>Filter Type</b> from the list at the left.</li>
            <li>Set <b>Parameters</b> for your filter including vertical and horizontal graph scale type (logarithmic or linear).</li>
            <li>Note that, when you change the sample rate or the center frequency, the center frequency for your filter is automatically limited to less than or equal to 1/2 of the sample rate if it has a higher value. This is consistent with the <a href="https://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem">Nyquist-Shannon Sampling theorem</a>, which in essence says that the meaningful bandwidth for a digital channel is limited to 1/2 the sample rate. A more useful value is 1/4 the sample rate, in the middle of the filter's usable bandwidth, but this is under the user's control.</li>
            <li>The filter constants list may appear to be missing one value: <b>a<sub>0</sub></b>. But during filter calculations this value is eliminated (i.e. normalized to equal 1) for the sake of efficiency and operating speed (see <a href="javascript/BiQuadFilter.js">the JavaScript source</a> for details, and a more in-depth discussion of this issue below).</li>
            <li>Hover your pointing device over the chart to see specific x,y value pairs.</li>
            <li>Spin your mouse wheel over the numerical inputs to change their values in a fast and intuitive way.</li>
            <li>Many practical programs and code sources are described later in this article, all of which accept the parameter sets this application produces.</li>
          </ul>
          
        </blockquote>
        
        <a name="Program_Background"></a><span class="article_subtopic">Program Background</span>
        
        <blockquote>
          <p>The program at the top of this page can be used to explore the properties of biquadratic filters.This table outlines the properties of the available filter types:</p>
          
          <!-- graphics generator: /netbackup/data/python_projects/biquad_module/exercise_biquads_with_saved_graphs.py -->
          
          <blockquote>
            <table class="present bordered" border="1">
              <tr>
                <th>
                  Filter Type
                </th>
                <th>
                  Q adj
                </th>
                <th>
                  Gain adj
                </th>
                <th>
                  Comments
                </th>
                <th>
                  Image
                </th>
              </tr>
              <tr>
                <td>
                  Bandpass
                </td>
                <td>
                  Y
                </td>
                <td>
                  N
                </td>
                <td>
                  The most generally useful filter type.
                </td>
                <td>
                  <img src="generated_graphs/BandPass.png" width="300" title="" alt=""/>
                </td>
              </tr>
              <tr>
                <td>
                  Low-pass
                </td>
                <td>
                  Y
                </td>
                <td>
                  N
                </td>
                <td rowspan="2">
                  For low-pass and high-pass biquadratic filters, one normally sets Q = 0.707 ($\frac{1}{\sqrt{2}}$) to achieve a Butterworth filter transfer function with a 3 DB drop at the specified operating frequency. Higher Q settings produce an often-undesirable peak near the center frequency and dynamic instability in operation.
                </td>
                <td>
                  <img src="generated_graphs/LowPass.png" width="300" title="" alt=""/>
                </td>
              </tr>
              <tr>
                <td>
                  High-pass
                </td>
                <td>
                  Y
                </td>
                <td>
                  N
                </td>
                <td>
                  <img src="generated_graphs/HighPass.png" width="300" title="" alt=""/>
                </td>
              </tr>
              <tr>
                <td>
                  Peak
                </td>
                <td>
                  Y
                </td>
                <td>
                  Y
                </td>
                <td>
                  This filter is a bit tricky to set up, because both Q and gain are effective. The idea is that one can use the gain control to set a nonzero base gain level that applies to all frequencies, then use the frequency and Q controls to set a narrow peak to exceed that level. Note also that, with a negative gain setting, the relation between the plateau and peak is reversed.
                </td>
                <td>
                  <img src="generated_graphs/Peak.png" width="300" title="" alt=""/>
                </td>
              </tr>
              <tr>
                <td>
                  Notch
                </td>
                <td>
                  Y
                </td>
                <td>
                  N
                </td>
                <td>
                  This filter is more or less the opposite of the "Peak" filter &mdash; it creates a narrow rejection band, the width of which is set by the Q control. (But no plateau as with "Peak".)
                </td>
                <td>
                  <img src="generated_graphs/Notch.png" width="300" title="" alt=""/>
                </td>
              </tr>
              <tr>
                <td>
                  Lowshelf
                </td>
                <td>
                  N
                </td>
                <td>
                  Y
                </td>
                <td rowspan="2">
                  Lowshelf and highshelf filters provide a sort of "plateau" effect, under control of the gain setting, and not unlike the "Peak" filter described above. Note that negative gain settings reverse the identity of the filter &mdash; lowshelf becomes highshelf and the reverse.
                </td>
                <td>
                  <img src="generated_graphs/LowShelf.png" width="300" title="" alt=""/>
                </td>
              </tr>
              <tr>
                <td>
                  Highshelf
                </td>
                <td>
                  N
                </td>
                <td>
                  Y
                </td>
                <td>
                  <img src="generated_graphs/HighShelf.png" width="300" title="" alt=""/>
                </td>
              </tr>
            </table>
          </blockquote>
          
          <p>Here are some points about the JavaScript program:</p>
          
          <ul>
            <li>The numerical entry controls will accept numbers that are typed in, or (on most browsers) they can be controlled by your mouse &mdash; spin your mouse wheel over the numerical input controls to increment/decrement their values.</li>
            
            <li>The program's "Filter Constants" list shows the properties of the present filter. In typical practice, the data available there is not very important because normal biquadratic filter applications and classes include a way to create any desired filter constants on the fly during instantiation of the class. This means BiQuadDesigner is really meant to allow interactive exploration of biquadratic filters of various type and settings, rather than pin down a design's details.</li>
            
            <li>Notice that the vertical chart dimension can have a linear or decibel scale. The decibel scale is useful for comparing biquadratic filters to other filter types and to each other.</li>
            
            <li>Notice about the graph that hovering your pointing device over the graph produces a readout of x,y data pairs, with both linear and decibel values. This allows the user to establish details of the filter's properties.</li>
            
            <li>While using the program, remember the <a href="http://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem">Nyquist-Shannon sampling theorem</a> &mdash; the meaningful domain for filter design and modeling is between 0 Hz and 1/2 the sampling rate. In some cases this fact can be turned to the user's advantage &mdash; setting a low sampling rate may uncover a filter design that may be optimal for low-clock-rate environments.</li>
            
            
            
          </ul>
          
        </blockquote>

        <a name="Version_History"></a><span class="article_subtopic">Version History</span>
        
        <blockquote>
          <ul>
          <li>Version 1.6 10.23.2017. Updated the Java application's code to bring it into correspondence with the JavaScript version.</li>
          <li>Version 1.5 10.22.2017. Changed the decibel readout convention to 20 * log10 in all forms of the biquadratic filter, to be consistent with standard voltage/current measurement conventions.</li>
          <li>Version 1.4 10.21.2017. Fixed an error in the function that provides a static filter output for testing and display purposes.</li>
            <li>Version 1.3 10.21.2017. Extensively changed the Java application to better correspond with this JavaScript version and its features.</li>
            <li>Version 1.2 12.09.2013. Added explicit clipboard copy function and control (only works when operated as desktop application).</li>
            <li>Version 1.1 03.24.2011. Improved the mouse cursor readout to display simultaneous unit and decibel values.</li>
            <li>Version 1.0 03.23.2011. Initial public release.</li>
          </ul>
        </blockquote>
        
        
        <a name="References"></a><span class="article_subtopic">References</span>
        
        <blockquote>
          <ul>
            <li><a href="source_files/BiQuadraticFilter.java">Example biquadratic filter class source file (Java)</a></li>
            <li><a href="source_files/biquad_module.py">Example biquadratic filter class source file (Python)</a></li>
            <li><a href="http://www.sagemath.org/">Sage</a> <a href="source_files/biquadratic_filter_exposition.sws">biquadratic filter interactive worksheet</a></li>
            <li><a href="http://en.wikipedia.org/wiki/RC_circuit">RC Circuit (Wikipedia)</a></li>
            <li><a href="http://en.wikipedia.org/wiki/Digital_biquad_filter">Digital Biquad Filter (Wikipedia)</a></li>
            <li><a href="http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt">Cookbook formulae for audio EQ biquad filter coefficients</a></li>
          </ul>
          
        </blockquote>
        
        &nbsp;
      </div> <!-- content -->
    </div> <!-- wrapper -->
    <p></p>
  </body>
</html>
